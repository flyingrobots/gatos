import{_ as t,c as a,o,a3 as i}from"./chunks/framework.De09ol_b.js";const s="/gatos/assets/docs_diagrams_state_management__86fd1ffb65__mermaid_1.kRwViAOD.svg",h=JSON.parse('{"title":"GATOS State Management Example","description":"","frontmatter":{},"headers":[],"relativePath":"diagrams/state_management.md","filePath":"diagrams/state_management.md","lastUpdated":1763160800000}'),n={name:"diagrams/state_management.md"};function r(d,e,l,c,m,u){return o(),a("div",{"data-pagefind-body":!0},[...e[0]||(e[0]=[i('<h1 id="gatos-state-management-example" tabindex="-1">GATOS State Management Example <a class="header-anchor" href="#gatos-state-management-example" aria-label="Permalink to &quot;GATOS State Management Example&quot;">​</a></h1><p><a id="gatos-state-management-example"></a></p><ul><li><a href="#event-schema">Event Schema</a></li><li><a href="#retry-policy">Retry Policy</a></li><li><a href="#state-computation">State Computation</a></li></ul><p><a id="gatos-state-management-example"></a></p><p>This diagram illustrates how the state of an entity (in this case, a Job) transitions based on events recorded in the GATOS ledger. This is a conceptual model; the actual state is derived by a &quot;fold&quot; process running in <code>gatos-echo</code>.</p><figure><img src="'+s+'" alt="diagram 1" loading="lazy"></figure><h2 id="event-schema" tabindex="-1">Event Schema <a class="header-anchor" href="#event-schema" aria-label="Permalink to &quot;Event Schema&quot;">​</a></h2><p><a id="event-schema"></a></p><ul><li>jobs.enqueued: <code>{ &quot;job_id&quot;: &quot;&lt;ULID&gt;&quot;, &quot;payload&quot;: { ... } }</code></li><li>jobs.result: <code>{ &quot;job_id&quot;: &quot;&lt;ULID&gt;&quot;, &quot;ok&quot;: true|false, &quot;attempts&quot;: &lt;u32&gt; }</code></li></ul><h2 id="retry-policy" tabindex="-1">Retry Policy <a class="header-anchor" href="#retry-policy" aria-label="Permalink to &quot;Retry Policy&quot;">​</a></h2><p><a id="retry-policy"></a></p><ul><li>Default <code>max_retries</code>: 3 (configurable per deployment).</li><li>Transition to <code>Retrying</code> when <code>attempts &lt; max_retries</code>.</li><li>Transition to <code>DeadLetterQueue</code> when <code>attempts &gt;= max_retries</code>.</li></ul><h2 id="state-computation" tabindex="-1">State Computation <a class="header-anchor" href="#state-computation" aria-label="Permalink to &quot;State Computation&quot;">​</a></h2><p><a id="state-computation"></a> State is derived by folding ledger events in <code>gatos-echo</code> using a deterministic reducer that updates <code>attempts</code> and terminal state based on <code>jobs.result.ok</code> and <code>attempts</code> compared to <code>max_retries</code>.</p>',14)])])}const g=t(n,[["render",r]]);export{h as __pageData,g as default};
