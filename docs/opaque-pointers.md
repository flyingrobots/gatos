---
title: Opaque Pointers — Privacy by Construction
---

# Opaque Pointers — Privacy by Construction
<a id="opaque-pointers-privacy-by-construction"></a>

<!-- AUTOGENERATED TOC START -->
- [Public Pointer Rules (Normative)](#public-pointer-rules-normative)
- [Availability & Resolver](#availability-resolver)
- [Projection Determinism](#projection-determinism)
- [BAA — Blob Availability Attestation](#baa-blob-availability-attestation)

<!-- AUTOGENERATED TOC END -->

<a id="opaque-pointers-privacy-by-construction"></a>

Opaque Pointers allow public verification with private bytes.

## Public Pointer Rules (Normative)
<a id="public-pointer-rules-normative"></a>

<a id="public-pointer-rules-normative"></a>

See [[[SPEC §7](/SPEC#7)](/SPEC#7)](/SPEC#7) and Research Profile §12.1.

- Low-entropy classes: public pointers **MUST NOT** expose plaintext digests.
- Public pointers **MUST** include a `ciphertext_digest`.
- Pointer `size` **SHOULD** be bucketed (e.g., 1 KB, 4 KB, 16 KB, 64 KB).
- Plaintext commitments, if needed, MUST be hidden (stored in `encrypted_meta`).

## Availability & Resolver
<a id="availability-resolver"></a>

<a id="availability-resolver"></a>

Resolvers serve private bytes to authorized clients.

Headers:

- `Digest: blake3=<hex>`
- `X-BLAKE3-Digest: <hex>` (duplicate for intermediaries)

Auth (normative default): Bearer JWT; log decisions under `refs/gatos/audit/`.

Required JWT claims:

- `sub` — subject (requesting principal)
- `aud` — audience (resolver/repo id)
- `exp` — expiry (short-lived)
- Optional `scope` — dataset/namespace scope

Optional extensions: HTTP Message Signatures and/or mTLS may be supported; they are not required for the Research profile.

## Projection Determinism
<a id="projection-determinism"></a>

<a id="projection-determinism"></a>

Folds operate on pointer shapes, not plaintext bytes. Any materialized computation over decrypted data runs in jobs (PoE) and contributes to PoF/PoX rather than the public fold itself.

## BAA — Blob Availability Attestation
<a id="baa-blob-availability-attestation"></a>

<a id="baa-blob-availability-attestation"></a>

```json
{ "blob": "blake3:<hex>", "store": "s3://bucket/path", "retain_until": "2026-01-01T00:00:00Z", "sig": "ed25519:<base64>" }
```

Policies can require a valid BAA before accepting pointers into state.
