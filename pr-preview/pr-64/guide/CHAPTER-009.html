<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 9: The GATOS Morphology Calculus | GATOS</title>
    <meta name="description" content="Git As The Operating Surface">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/gatos/pr-preview/pr-64/assets/style.B4hd1-5U.css" as="style">
    <link rel="preload stylesheet" href="/gatos/pr-preview/pr-64/vp-icons.css" as="style">
    
    <script type="module" src="/gatos/pr-preview/pr-64/assets/app.DrRrGYUm.js"></script>
    <link rel="preload" href="/gatos/pr-preview/pr-64/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/gatos/pr-preview/pr-64/assets/chunks/theme.C6RZ5RmL.js">
    <link rel="modulepreload" href="/gatos/pr-preview/pr-64/assets/chunks/framework.BXNB9gP7.js">
    <link rel="modulepreload" href="/gatos/pr-preview/pr-64/assets/guide_CHAPTER-009.md.D4JX9BlH.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <script>import("/gatos/pr-preview/pr-64/pagefind/pagefind.js").then(i=>{window.__pagefind__=i,i.init()}).catch(()=>{});</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/gatos/pr-preview/pr-64/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>GATOS</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="blog-search search" data-pagefind-ignore="all" data-v-6aa21345 data-v-9c3ad077><div class="nav-search-btn-wait" data-v-9c3ad077><span data-v-9c3ad077><svg width="14" height="14" viewBox="0 0 20 20" data-v-9c3ad077><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" data-v-9c3ad077></path></svg></span><span class="search-tip" data-v-9c3ad077>Search</span><span class="metaKey" data-v-9c3ad077> K </span></div><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/gatos/pr-preview/pr-64/guide/CHAPTER-001.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Book</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/gatos/pr-preview/pr-64/SPEC.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>SPEC</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/gatos/pr-preview/pr-64/TECH-SPEC.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>TECH-SPEC</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/gatos/pr-preview/pr-64/decisions/README.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ADRs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/flyingrobots/gatos" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/flyingrobots/gatos" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>The GATOS Book</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-001.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 1: The GATOS System Model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-002.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 2–The Ledger Plane: An Immutable History</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-003.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 3: The State Plane: Deterministic Folds</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-004.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 4: The Policy Plane: Governance as Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-005.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 5: Project Stargate: Local Enforcement & Magic Mirrors</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-006.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 6: The Message & Job Planes: Distributed Workflows</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-007.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 7: Federation & Mind-Melds: Cross-Repo Operations</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-008.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 8: Interfaces & Integration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-009.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 9: The GATOS Morphology Calculus</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-010.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 10: Proofs, Attestation, and Privacy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-011.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 11: Performance: Partial Folds, Caching, and Exploration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/gatos/pr-preview/pr-64/guide/CHAPTER-012.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Chapter 12: The GATOS Vision</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _gatos_pr-preview_pr-64_guide_CHAPTER-009" data-v-39a288b8><div data-pagefind-body="true"><h1 id="chapter-9-the-gatos-morphology-calculus" tabindex="-1">Chapter 9: The GATOS Morphology Calculus <a class="header-anchor" href="#chapter-9-the-gatos-morphology-calculus" aria-label="Permalink to &quot;Chapter 9: The GATOS Morphology Calculus&quot;">​</a></h1><p><a id="chapter-9-the-gatos-morphology-calculus"></a></p><ul><li><a href="#core-objects">Core Objects</a></li><li><a href="#key-theorems-and-their-payoffs">Key Theorems and Their Payoffs</a><ul><li><a href="#theorem-1-deterministic-shape">Theorem 1: Deterministic Shape</a></li><li><a href="#theorem-2-localization-incrementality">Theorem 2: Localization &amp; Incrementality</a></li><li><a href="#theorem-3-safe-policy-migration">Theorem 3: Safe Policy Migration</a></li><li><a href="#theorem-4-mind-meld-as-a-pushout">Theorem 4: Mind-Meld as a Pushout</a></li><li><a href="#further-theorems">Further Theorems</a></li></ul></li><li><a href="#concurrency-and-conflict-resolution">Concurrency and Conflict Resolution</a></li><li><a href="#epochs-and-invariants">Epochs and Invariants</a></li><li><a href="#summary-from-math-to-provable-practices">Summary: From Math to Provable Practices</a><ul><li><a href="#calculus-quick-ref">Calculus Quick-Ref</a></li></ul></li></ul><p><a id="chapter-9-the-gatos-morphology-calculus"></a></p><p>The guarantees of determinism, provability, and composability in GATOS are not just design goals; they are the result of a formal mathematical framework. This framework, the <strong>GATOS Morphology Calculus</strong>, provides the theoretical underpinnings for the entire system. This chapter introduces the core concepts of this calculus, linking the abstract mathematics to the concrete features you use every day.</p><p>The motto of the calculus is simple: <em>Each commit folds the surface into a new, deterministic shape.</em></p><h2 id="core-objects" tabindex="-1">Core Objects <a class="header-anchor" href="#core-objects" aria-label="Permalink to &quot;Core Objects&quot;">​</a></h2><p><a id="core-objects"></a></p><p><a id="core-objects"></a></p><p>The calculus is built on a few fundamental objects:</p><ol><li><p><strong>Ledger DAG:</strong> The event history of a GATOS repository is a finite Directed Acyclic Graph (DAG), where <strong>nodes</strong> are events (commits) and <strong>edges</strong> are the parent links between them. This DAG induces a partial order on all events, representing causality.</p></li><li><p><strong>Policy:</strong> A <strong>policy</strong> is an immutable set of rules (e.g., quorums, capabilities, RLS rules) that acts as a parameter for any computation.</p></li><li><p><strong>Shape:</strong> A <strong>shape</strong> is the canonical, serialized form of a system&#39;s state. It is a hashable representation of the &quot;shape of the world&quot; at a given moment.</p></li><li><p><strong>Fold Functor:</strong> A <strong>fold</strong> is a mathematical function (specifically, a <strong>functor</strong>) that transforms the event history into a shape. It is parameterized by a policy, written as $F_P$. This is implemented by the <strong>Echo</strong> engine, which relies on local, confluent rewrite rules (<strong>Echo/DPO</strong> with critical-pair checks).</p><p><code>Fold = F(event_history, policy) -&gt; shape</code></p></li></ol><h2 id="key-theorems-and-their-payoffs" tabindex="-1">Key Theorems and Their Payoffs <a class="header-anchor" href="#key-theorems-and-their-payoffs" aria-label="Permalink to &quot;Key Theorems and Their Payoffs&quot;">​</a></h2><p><a id="key-theorems-and-their-payoffs"></a></p><p><a id="key-theorems-and-their-payoffs"></a></p><p>The Morphology Calculus is defined by a series of theorems that translate directly into powerful system features.</p><h3 id="theorem-1-deterministic-shape" tabindex="-1">Theorem 1: Deterministic Shape <a class="header-anchor" href="#theorem-1-deterministic-shape" aria-label="Permalink to &quot;Theorem 1: Deterministic Shape&quot;">​</a></h3><p><a id="theorem-1-deterministic-shape"></a></p><p><a id="theorem-1-deterministic-shape"></a></p><blockquote><p>For a fixed policy, any two equivalent event sequences (i.e., containing the same events in the same causal order) will always fold to the exact same shape. Note the dependency on the effective <code>policy_version</code>/<code>policy_root</code>.</p></blockquote><p><strong>Feature Payoff:</strong> This is the foundation of all determinism in GATOS. It guarantees <strong>reproducible state</strong>. If you have the same journal and the same policy, you are guaranteed to compute the same state root hash. This enables verifiable caching, state synchronization, and perfect replay.</p><h3 id="theorem-2-localization-incrementality" tabindex="-1">Theorem 2: Localization &amp; Incrementality <a class="header-anchor" href="#theorem-2-localization-incrementality" aria-label="Permalink to &quot;Theorem 2: Localization &amp; Incrementality&quot;">​</a></h3><p><a id="theorem-2-localization-incrementality"></a></p><p><a id="theorem-2-localization-incrementality"></a></p><blockquote><p>If the event history can be partitioned into independent regions (with no read/write overlap per policy), then the fold of the whole history is equivalent to the composition of the folds of each partition.</p></blockquote><p><strong>Feature Payoff:</strong> This enables <strong>partial and lazy folds</strong>. The system doesn&#39;t need to recompute the entire world state for every small change. It only needs to re-fold the partitions affected by new events, dramatically improving performance. This is what justifies the Index &amp; Cache plane. This theorem relies on the concept of <strong>Footprints</strong> and an <strong>Independence Predicate</strong> to define disjoint regions.</p><h3 id="theorem-3-safe-policy-migration" tabindex="-1">Theorem 3: Safe Policy Migration <a class="header-anchor" href="#theorem-3-safe-policy-migration" aria-label="Permalink to &quot;Theorem 3: Safe Policy Migration&quot;">​</a></h3><p><a id="theorem-3-safe-policy-migration"></a></p><p><a id="theorem-3-safe-policy-migration"></a></p><blockquote><p>A policy change can be modeled as a <strong>natural transformation</strong> $\eta: F_P \Rightarrow F_Q$ between two fold functors. This transformation provides a safe, verifiable way to migrate from a state computed under an old policy to a state computed under a new one.</p></blockquote><figure><img src="/gatos/pr-preview/pr-64/assets/docs_guide_CHAPTER-009__1a8303293d__mermaid_1.BeZ2PM56.svg" alt="diagram 1" loading="lazy"></figure><p><strong>Feature Payoff:</strong> This allows for <strong>governance-safe upgrades</strong>. You can change quorums, validation rules, or capabilities without corrupting existing state, because the migration path is mathematically defined and proven to be consistent.</p><h3 id="theorem-4-mind-meld-as-a-pushout" tabindex="-1">Theorem 4: Mind-Meld as a Pushout <a class="header-anchor" href="#theorem-4-mind-meld-as-a-pushout" aria-label="Permalink to &quot;Theorem 4: Mind-Meld as a Pushout&quot;">​</a></h3><p><a id="theorem-4-mind-meld-as-a-pushout"></a></p><p><a id="theorem-4-mind-meld-as-a-pushout"></a></p><blockquote><p>Two independent GATOS repositories (with no shared history) can be deterministically merged via a <strong>pushout</strong>, a concept from category theory. The merge is guided by a schema that describes the correspondences between the two systems.</p></blockquote><figure><img src="/gatos/pr-preview/pr-64/assets/docs_guide_CHAPTER-009__1a8303293d__mermaid_2.Bu8kkoUA.svg" alt="diagram 2" loading="lazy"></figure><p><strong>Feature Payoff:</strong> This enables the <strong>&quot;Mind-Meld&quot;</strong>—a deterministic, conflict-free merge of state between different repositories. This is the foundation for federation and cross-repo collaboration. The process also produces a <code>Proof-of-Meld</code>, a lightweight, attestable certificate of the merge operation. This theorem is a direct consequence of the <strong>Concurrency Theorems</strong> which state that independent DPO squares compose along disjoint sums, leading to isomorphic results regardless of execution order.</p><h3 id="further-theorems" tabindex="-1">Further Theorems <a class="header-anchor" href="#further-theorems" aria-label="Permalink to &quot;Further Theorems&quot;">​</a></h3><p><a id="further-theorems"></a></p><p><a id="further-theorems"></a></p><p>The calculus extends to other planes, modeling the <strong>Job Plane</strong> as a <strong>symmetric monoidal category</strong> (guaranteeing parallel soundness) and the <strong>Ledger&#39;s consensus governance</strong> as a <strong>2-category</strong> (providing algebraic idempotence for approvals and grants). It even provides a model for <strong>hierarchical compaction</strong> (&quot;folds-of-folds&quot;) using <strong>operads</strong>, which justifies the safe creation of summary epochs.</p><h2 id="concurrency-and-conflict-resolution" tabindex="-1">Concurrency and Conflict Resolution <a class="header-anchor" href="#concurrency-and-conflict-resolution" aria-label="Permalink to &quot;Concurrency and Conflict Resolution&quot;">​</a></h2><p><a id="concurrency-and-conflict-resolution"></a></p><p><a id="concurrency-and-conflict-resolution"></a></p><p>The operational semantics of GATOS&#39;s concurrent rewriting are critical for maintaining determinism.</p><ul><li><strong>Footprints:</strong> Each rewrite rule precisely defines its read/write sets on nodes, edges, and <strong>Ports</strong> (boundary interfaces).</li><li><strong>Independence Predicate:</strong> Two rewrites are independent if their read/write sets over nodes and ports are disjoint (no overlap) and their <code>factor_mask</code>s do not overlap.</li><li><strong>Concurrency Theorems:</strong> If rewrites are independent, they commute up to isomorphism. This means they can be executed in any order, or in parallel, yielding the same result.</li><li><strong>Conflict Resolution Policies:</strong> When conflicts are detected (independence violation), GATOS rules define how to resolve them: <code>ABORT</code>, <code>RETRY</code>, <code>JOIN</code> (applying a precomputed join), or <code>USER_RESOLVE</code> (invoking a domain callback).</li></ul><h2 id="epochs-and-invariants" tabindex="-1">Epochs and Invariants <a class="header-anchor" href="#epochs-and-invariants" aria-label="Permalink to &quot;Epochs and Invariants&quot;">​</a></h2><p><a id="epochs-and-invariants"></a></p><p><a id="epochs-and-invariants"></a></p><p>GATOS uses <strong>Epochs</strong> to manage the coherence of its state. Epochs are monotonically increasing counters (<code>epoch_att</code> for attachments, <code>epoch_skel</code> for skeleton) that ensure readers always observe a consistent state.</p><ul><li><strong>Snapshot Isolation:</strong> Readers are bound to specific epoch counters and never witness a partially updated or &quot;torn&quot; state.</li><li><strong>Atomicity:</strong> A committed rewrite either appears entirely in the next epoch(s) or not at all.</li><li><strong>Epoch Flip:</strong> Epochs only advance after all changes are published, ensuring a coherent world-rollover for readers.</li></ul><p>These invariants are crucial for maintaining the integrity of the GATOS operating surface.</p><h2 id="summary-from-math-to-provable-practices" tabindex="-1">Summary: From Math to Provable Practices <a class="header-anchor" href="#summary-from-math-to-provable-practices" aria-label="Permalink to &quot;Summary: From Math to Provable Practices&quot;">​</a></h2><p><a id="summary-from-math-to-provable-practices"></a></p><p><a id="summary-from-math-to-provable-practices"></a></p><p>The GATOS Morphology Calculus is not merely an academic exercise. It is a practical engineering playbook. By building the system on a foundation of provable mathematics, GATOS moves beyond &quot;best practices&quot; to <strong>provable practices</strong>.</p><p>Each theorem corresponds directly to a feature that provides a concrete benefit:</p><ul><li><strong>Determinism</strong> gives you reproducible state.</li><li><strong>Localization</strong> gives you fast, incremental updates.</li><li><strong>Natural Transformations</strong> give you safe policy migrations.</li><li><strong>Pushouts</strong> give you deterministic cross-repo merges.</li></ul><p>This is how GATOS delivers on its promise of a system that is not just powerful, but also trustworthy, auditable, and correct by construction.</p><h3 id="calculus-quick-ref" tabindex="-1">Calculus Quick-Ref <a class="header-anchor" href="#calculus-quick-ref" aria-label="Permalink to &quot;Calculus Quick-Ref&quot;">​</a></h3><p><a id="calculus-quick-ref"></a></p><p><a id="calculus-quickref"></a></p><ul><li>Fold functor <code>F_P</code>: Maps histories to shapes under policy <code>P</code>.</li><li>Natural transformation <code>η: F_P ⇒ F_Q</code>: Safe migration from policy <code>P</code> to <code>Q</code>.</li><li>Pushout: Canonical construction to merge two shapes along a schema of correspondences.</li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><!----><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>Last updated: <time datetime="2025-11-14T03:57:13.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/gatos/pr-preview/pr-64/guide/CHAPTER-008.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Chapter 8: Interfaces & Integration</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/gatos/pr-preview/pr-64/guide/CHAPTER-010.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Chapter 10: Proofs, Attestation, and Privacy</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"cli_export.md\":\"DjIj7HNB\",\"cli_foldc.md\":\"B44UFC5z\",\"cli_lint.md\":\"C2vKqd3h\",\"cli_policyc.md\":\"CbxDMyFv\",\"cli_pox.md\":\"o4ht0HDk\",\"decisions_adr-0001_decision.md\":\"C8Uryn3k\",\"decisions_adr-0001_flyingrobots.md\":\"Bt3W4vSw\",\"decisions_adr-0002_decision.md\":\"CDbgUwR_\",\"decisions_adr-0003_decision.md\":\"DuO6Gpdf\",\"decisions_readme.md\":\"BW7TeR7E\",\"deterministic-lua.md\":\"k5Aba7oO\",\"diagrams_api_endpoints.md\":\"CbERBkrj\",\"diagrams_architecture.md\":\"CM5jW3DB\",\"diagrams_data_flow.md\":\"B2WoHofU\",\"diagrams_state_management.md\":\"D_2FyMFp\",\"exporter.md\":\"C4KL2l8W\",\"faq.md\":\"Db5eqMUW\",\"features.md\":\"zZZZoQ6w\",\"guide_chapter-001.md\":\"B_-TiZbr\",\"guide_chapter-002.md\":\"VlMi6vRQ\",\"guide_chapter-003.md\":\"Cl9eE0Ez\",\"guide_chapter-004.md\":\"DJGrHa6I\",\"guide_chapter-005.md\":\"BvdmBODw\",\"guide_chapter-006.md\":\"CZkHsr9-\",\"guide_chapter-007.md\":\"CDxQmArp\",\"guide_chapter-008.md\":\"CrGb5zr3\",\"guide_chapter-009.md\":\"D4JX9BlH\",\"guide_chapter-010.md\":\"CU5xt4-4\",\"guide_chapter-011.md\":\"B50dnout\",\"guide_chapter-012.md\":\"D7d1FrZ4\",\"guide_hello-ops.md\":\"BsiaX24p\",\"guide_hello-privacy.md\":\"A-4eursE\",\"guide_readme.md\":\"DuCPEqPG\",\"index.md\":\"2b09qvTJ\",\"opaque-pointers.md\":\"BLWTE80p\",\"opaque-resolver.md\":\"BsFOswds\",\"proofs_proof-of-consensus.md\":\"DQ-DrFmz\",\"proofs_proof-of-execution.md\":\"Brlhg1z8\",\"proofs_proof-of-experiment.md\":\"Bfu8sWwt\",\"proofs_proof-of-fold.md\":\"Btn1Yri7\",\"research-profile.md\":\"DNSrRi6n\",\"roadmap-xtask.md\":\"1D8M_T4a\",\"roadmap.md\":\"Ce3leZ8Q\",\"spec.md\":\"CeF-G8eW\",\"stakeholders.md\":\"8Bz_7mp3\",\"stargate-push-gate.md\":\"DyA207uv\",\"tasks.md\":\"CoDu33rT\",\"tech-spec.md\":\"DOHH77HW\",\"use-cases.md\":\"DQOIWpwt\",\"why-not-x.md\":\"CLGdp-tR\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"GATOS\",\"description\":\"Git As The Operating Surface\",\"base\":\"/gatos/pr-preview/pr-64/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Book\",\"link\":\"/guide/CHAPTER-001\"},{\"text\":\"SPEC\",\"link\":\"/SPEC\"},{\"text\":\"TECH-SPEC\",\"link\":\"/TECH-SPEC\"},{\"text\":\"ADRs\",\"link\":\"/decisions/README\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"The GATOS Book\",\"items\":[{\"text\":\"Chapter 1: The GATOS System Model\",\"link\":\"/guide/CHAPTER-001\"},{\"text\":\"Chapter 2–The Ledger Plane: An Immutable History\",\"link\":\"/guide/CHAPTER-002\"},{\"text\":\"Chapter 3: The State Plane: Deterministic Folds\",\"link\":\"/guide/CHAPTER-003\"},{\"text\":\"Chapter 4: The Policy Plane: Governance as Code\",\"link\":\"/guide/CHAPTER-004\"},{\"text\":\"Chapter 5: Project Stargate: Local Enforcement & Magic Mirrors\",\"link\":\"/guide/CHAPTER-005\"},{\"text\":\"Chapter 6: The Message & Job Planes: Distributed Workflows\",\"link\":\"/guide/CHAPTER-006\"},{\"text\":\"Chapter 7: Federation & Mind-Melds: Cross-Repo Operations\",\"link\":\"/guide/CHAPTER-007\"},{\"text\":\"Chapter 8: Interfaces & Integration\",\"link\":\"/guide/CHAPTER-008\"},{\"text\":\"Chapter 9: The GATOS Morphology Calculus\",\"link\":\"/guide/CHAPTER-009\"},{\"text\":\"Chapter 10: Proofs, Attestation, and Privacy\",\"link\":\"/guide/CHAPTER-010\"},{\"text\":\"Chapter 11: Performance: Partial Folds, Caching, and Exploration\",\"link\":\"/guide/CHAPTER-011\"},{\"text\":\"Chapter 12: The GATOS Vision\",\"link\":\"/guide/CHAPTER-012\"}]}],\"/\":[{\"text\":\"Reference\",\"items\":[{\"text\":\"SPEC\",\"link\":\"/SPEC\"},{\"text\":\"TECH-SPEC\",\"link\":\"/TECH-SPEC\"},{\"text\":\"ADRs\",\"link\":\"/decisions/README\"}]}]},\"outline\":\"deep\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/flyingrobots/gatos\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>