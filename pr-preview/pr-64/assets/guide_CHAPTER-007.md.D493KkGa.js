import{_ as e,c as i,o as a,a3 as t}from"./chunks/framework.BXNB9gP7.js";const n="/gatos/pr-preview/pr-64/assets/docs_guide_CHAPTER-007__72263df275__mermaid_1.CURthNJb.svg",g=JSON.parse('{"title":"Chapter 7: Federation & Mind-Melds: Cross-Repo Operations","description":"","frontmatter":{},"headers":[],"relativePath":"guide/CHAPTER-007.md","filePath":"guide/CHAPTER-007.md","lastUpdated":1763150042000}'),o={name:"guide/CHAPTER-007.md"};function h(r,s,l,p,d,k){return a(),i("div",{"data-pagefind-body":!0},[...s[0]||(s[0]=[t('<h1 id="chapter-7-federation-mind-melds-cross-repo-operations" tabindex="-1">Chapter 7: Federation &amp; Mind-Melds: Cross-Repo Operations <a class="header-anchor" href="#chapter-7-federation-mind-melds-cross-repo-operations" aria-label="Permalink to &quot;Chapter 7: Federation &amp; Mind-Melds: Cross-Repo Operations&quot;">​</a></h1><p><a id="chapter-7-federation-mind-melds-cross-repo-operations"></a></p><ul><li><a href="#federation-a-network-of-gatos-nodes">Federation: A Network of GATOS Nodes</a></li><li><a href="#the-challenge-merging-divergent-realities">The Challenge: Merging Divergent Realities</a></li><li><a href="#the-mind-meld-a-pushout-in-practice">The Mind-Meld: A Pushout in Practice</a><ul><li><a href="#proof-of-meld">Proof-of-Meld</a></li></ul></li><li><a href="#use-cases">Use Cases</a></li><li><a href="#summary">Summary</a></li><li><a href="#worked-mind-meld-example">Worked Mind-Meld Example</a><ul><li><a href="#conflict-resolution-semantics">Conflict Resolution Semantics</a></li></ul></li></ul><p><a id="chapter-7-federation-mind-melds-cross-repo-operations"></a></p><p>GATOS is designed as a distributed system where each Git repository is a self-contained, sovereign node. However, the true power of the architecture is realized when these independent nodes interact. This chapter explores how GATOS enables <strong>federation</strong> and deterministic state merging between repositories, even when they don&#39;t share a direct line of history.</p><h2 id="federation-a-network-of-gatos-nodes" tabindex="-1">Federation: A Network of GATOS Nodes <a class="header-anchor" href="#federation-a-network-of-gatos-nodes" aria-label="Permalink to &quot;Federation: A Network of GATOS Nodes&quot;">​</a></h2><p><a id="federation-a-network-of-gatos-nodes"></a> A GATOS <strong>federation</strong> is a network of independent GATOS repositories that have agreed to share some portion of their state or policy. For example, a central &quot;governance&quot; repository could define policies that are consumed by dozens of &quot;project&quot; repositories.</p><p>This is achieved through the Message Plane (<code>gatos-mind</code>) and the State Plane&#39;s ability to read from multiple sources. A project repository can subscribe to the <code>gatos.policy.updated</code> topic on the governance repository. When a new policy is published, the project node can fetch it, validate it, and incorporate it into its own local policy engine.</p><h2 id="the-challenge-merging-divergent-realities" tabindex="-1">The Challenge: Merging Divergent Realities <a class="header-anchor" href="#the-challenge-merging-divergent-realities" aria-label="Permalink to &quot;The Challenge: Merging Divergent Realities&quot;">​</a></h2><p><a id="the-challenge-merging-divergent-realities"></a> A more complex problem arises when two repositories have independently evolved and need to merge their states. A standard <code>git merge</code> is insufficient because it operates on lines of text and has no understanding of the semantic meaning of the GATOS state model. A simple merge could lead to a corrupted or inconsistent state.</p><p>GATOS solves this with a concept called a <strong>Mind-Meld</strong>, a deterministic, conflict-free merge of two distinct <strong>shapes</strong> (state snapshots). It allows two separate operating surfaces to be folded together into a new, unified surface.</p><h2 id="the-mind-meld-a-pushout-in-practice" tabindex="-1">The Mind-Meld: A Pushout in Practice <a class="header-anchor" href="#the-mind-meld-a-pushout-in-practice" aria-label="Permalink to &quot;The Mind-Meld: A Pushout in Practice&quot;">​</a></h2><p><a id="the-mind-meld-a-pushout-in-practice"></a> The Mind-Meld is the practical application of a mathematical concept from category theory called a <strong>pushout</strong>. You don&#39;t need to understand the deep theory to grasp the outcome.</p><p>Imagine two GATOS repositories, A and B, that have diverged. To merge them, you need a third piece of information: a <strong>schema manifest (S)</strong> that describes the correspondences between the two systems. It tells the meld engine how to map an object in repository A to its equivalent in repository B.</p><p>The meld operation is a pure function that takes these three inputs (Shape A, Shape B, and Schema S) and produces a single, new, deterministically-created shape, AB.</p><figure><img src="'+n+`" alt="diagram 1" loading="lazy"></figure><p>Because the meld is a deterministic fold, any node that performs the operation with the same three inputs will arrive at the exact same resulting shape and, therefore, the same <code>state_root</code> hash.</p><h3 id="proof-of-meld" tabindex="-1">Proof-of-Meld <a class="header-anchor" href="#proof-of-meld" aria-label="Permalink to &quot;Proof-of-Meld&quot;">​</a></h3><p><a id="proof-of-meld"></a> The output of a successful meld is not just the new shape, but also a <strong>Proof-of-Meld</strong>. This is a lightweight, attestable certificate that contains the hashes of the two input shapes and the schema manifest.</p><p><code>Proof-of-Meld = BLAKE3(root(Shape A) || root(Shape B) || root(Schema S))</code></p><p>This proof can be recorded in the Ledger Plane as a verifiable record that the merge occurred, linking the three previously independent histories into a new, unified timeline.</p><h2 id="use-cases" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h2><p><a id="use-cases"></a> This capability unlocks powerful workflows for decentralized collaboration:</p><ul><li><strong>Cross-Repo Governance:</strong> A central governance repo can define policies, and project repos can &quot;meld&quot; those policies into their own, ensuring consistent rules across an organization without a central server.</li><li><strong>Supply Chain Attestation:</strong> A software artifact (like a Docker image) can have its own GATOS repository containing its SBOM and test results. A project that consumes this artifact can meld the artifact&#39;s state into its own, creating a verifiable, end-to-end chain of provenance.</li><li><strong>Distributed Knowledge Graphs:</strong> Two researchers using <code>git-mind</code> can meld their knowledge graphs, combining their understanding into a new, richer graph that contains the union of their insights.</li></ul><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">​</a></h2><p><a id="summary"></a> Federation and Mind-Melds are what make GATOS a truly distributed operating surface. They provide a mathematically sound and verifiable way to compose and merge state across independent systems, moving beyond the limitations of a single repository. This enables a new class of decentralized applications where trust is established not by a central authority, but by shared, deterministic mathematics.</p><h2 id="worked-mind-meld-example" tabindex="-1">Worked Mind-Meld Example <a class="header-anchor" href="#worked-mind-meld-example" aria-label="Permalink to &quot;Worked Mind-Meld Example&quot;">​</a></h2><p><a id="worked-mind-meld-example"></a> Repo A (users):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a@example.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span></code></pre></div><p>Repo B (accounts):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;primaryEmail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a@example.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span></code></pre></div><p>Schema Manifest (correspondences):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user.id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;account.id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user.email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;account.primaryEmail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="conflict-resolution-semantics" tabindex="-1">Conflict Resolution Semantics <a class="header-anchor" href="#conflict-resolution-semantics" aria-label="Permalink to &quot;Conflict Resolution Semantics&quot;">​</a></h3><p><a id="conflict-resolution-semantics"></a> Meld rules are specified by the schema. When two mapped fields disagree, the schema can pick a strategy; the default is a deterministic precedence order. In this example, <code>account.primaryEmail</code> takes precedence over <code>user.email</code> when both are present and differ. Unmapped fields are preserved in their original namespaces unless the schema explicitly drops or remaps them.</p><p>Conflict example:</p><p>Repo A (users):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;old@example.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span></code></pre></div><p>Repo B (accounts):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;primaryEmail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new@example.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span></code></pre></div><p>Schema Manifest (email precedence B over A):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user.id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;account.id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user.email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;account.primaryEmail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;precedence&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Resulting AB shape (email from B wins):</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;primaryEmail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new@example.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span></code></pre></div><p><code>Proof-of-Meld = blake3(root(Shape A) || root(Shape B) || root(Schema))</code> — the proof remains the same regardless of the chosen merge semantics; only the roots change with the inputs and schema.</p><p>Schemas are versioned and signed under <code>refs/gatos/schemas/&lt;ns&gt;</code> and distributed like other state. See ADR-0012 (Federation/Mounts) and ADR-0011 (Exporter) for normative storage and export rules.</p>`,46)])])}const u=e(o,[["render",h]]);export{g as __pageData,u as default};
